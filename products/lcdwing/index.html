<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.101.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>LCD FeatherWing &#183; Oddly Specific Objects</title><meta name=description content><link type=text/css rel=stylesheet href=/css/print.css media=print><link type=text/css rel=stylesheet href=/css/poole.css><link type=text/css rel=stylesheet href=/css/syntax.css><link type=text/css rel=stylesheet href=/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><style>@media(min-width:48em){.logo-small{display:none}.logo-big{display:block}}@media(max-width:48em){.logo-small{display:block}.logo-big{display:none}}</style><a href=/><img class=logo-big src=/oso-bear.png></a>
<a href=/><img class=logo-big src=/oso-threeline.png></a>
<a href=/><img class=logo-small src=/oso-oneline.png></a></div><nav><ul class=sidebar-nav><li><a href=/about/>About</a></li><li><a href=/products/>Products</a></li><li><a href=/projects/>Projects</a></li></ul></nav><p>CC-BY-SA 4.0 Joey Castillo, except for the bear!</p></div></aside><main class="content container"><div class=post><h1>LCD FeatherWing</h1><p><img src=/products/lcdwing/lcdwing.png alt="A rendering of the LCD FeatherWing"></p><p>The LCD FeatherWing is a low-power display compatible with <a href=https://www.adafruit.com/category/830>Adafruit&rsquo;s Feather line of development boards</a>. It uses the BU9796 segment LCD controller to drive a custom liquid crystal display glass with 48 segments, including:</p><ul><li>Five indicator icons: Bell, Wifi, Moon, Arrows and Battery</li><li>Five 7-segment digits, plus a sign indicator</li><li>Four decimal points, one between each pair of digits</li><li>AM and PM indicators, plus a colon for displaying the time</li></ul><figure><img src=/products/lcdwing/display.svg></figure><h2 id=assembly-instructions>Assembly Instructions</h2><p>First, insert the LCD glass on the front of the wing (the side with the big white box). Then flip the wing over, and solder the LCD pins into the through holes on the back.</p><p><img src=/products/lcdwing/step1.gif alt="Animation: inserting the LCD"></p><p>Next, insert the Feather headers from the back, and solder them in on the front.</p><p><img src=/products/lcdwing/step2.gif alt="Animation: inserting the LCD"></p><h2 id=usage>Usage</h2><p>At this time, only CircuitPython is supported.</p><h3 id=circuitpython-usage>CircuitPython Usage</h3><ol><li>Download the the <a href=https://github.com/adafruit/Adafruit_CircuitPython_Bundle>Adafruit library and driver bundle</a>, as well as the <a href=https://github.com/joeycastillo/OSO_CircuitPython_LCD>CircuitPython driver for LCD FeatherWing</a>.</li><li>Plug in your Feather board running CircyutPython, and ensure that you can see the <code>CIRCUITPY</code> drive on your computer.</li><li>Copy both the <code>adafruit_bus_device</code> folder and the <code>oso_lcd</code> folder to your board&rsquo;s <code>lib</code> folder.</li></ol><p>You&rsquo;re done! Now you can instantiate the LCD driver and write to the display like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> board
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> oso_lcd.lcdwing_lite <span style=color:#f92672>import</span> LCDWingLite
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>display <span style=color:#f92672>=</span> LCDWingLite(board<span style=color:#f92672>.</span>I2C())
</span></span><span style=display:flex><span>display<span style=color:#f92672>.</span>print(<span style=color:#e6db74>&#34;HELLO&#34;</span>)</span></span></code></pre></div><h4 id=character-set-notes>Character Set Notes</h4><p>The character set in the LCD FeatherWing library displays characters in mixed case in order to give each character a unique representation. Both uppercase and lowercase letters in your string display in the case chosen by the library; there is no difference between <code>display.print("ABCDE")</code> and <code>display.print("abcde")</code>. <code>A</code> appears as uppercase, but <code>B</code> and <code>D</code> appear as lowercase to distinguish them from the <code>8</code> and <code>0</code> characters:</p><figure><img src=/products/lcdwing/display-abcde.svg></figure><p>Similarly, <code>C</code> appears in lowercase to distinguish it from the open parenthesis <code>(</code>, as seen here when we <code>display.print("(789)")</code>:</p><figure><img src=/products/lcdwing/display-789.svg></figure><p>Some characters simply don&rsquo;t work well as a seven-segment digit. In this example, we&rsquo;ve called <code>display.print("Wifi")</code> and <code>display.print("Main")</code>. The <code>W</code> appears as an upside down <code>A</code>, and the <code>M</code> appears as a tall <code>N</code>:</p><figure><img src=/products/lcdwing/display-aifi.svg></figure><figure><img src=/products/lcdwing/display-nain.svg></figure><p>If you are willing to sacrifice two characters, you can display these letters using some two character codes: <code>$J</code> displays a <code>W</code>, and <code>&7</code> displays an <code>M</code>. So you could display &ldquo;Wifi&rdquo; by calling <code>display.print("$Jifi")</code>, or &ldquo;Main&rdquo; by calling <code>display.print("&7ain")</code>:</p><figure><img src=/products/lcdwing/display-wifi.svg></figure><figure><img src=/products/lcdwing/display-main.svg></figure><p>Finally, there&rsquo;s one character that doesn&rsquo;t do what you would expect. Since the <code>#</code> symbol doesn&rsquo;t translate well to a 7-segment display, the library uses this character to display the degree symbol. So if you wanted to display a temperature of 72.4° F, you would do it like so: <code>display.print("72.4#F")</code>.</p><figure><img src=/products/lcdwing/display-temperature.svg></figure><h4 id=the-colon>The Colon</h4><p>When you call <code>display.print</code>, the LCD FeatherWing library automatically sets the colon if there is a colon in the appropriate spot (usually the third character in a string). So, for example, calling <code>display.print("12:34")</code> will set the colon.</p><figure><img src=/products/lcdwing/display-12_34.svg></figure><p>However, calling <code>display.print("1:23")</code> will not set the colon.</p><figure><img src=/products/lcdwing/display-123.svg></figure><p>Instead, add a space before: <code>display.print(" 1:23")</code>. The additional space at the beginning of the string pushes the colon to the correct spot.</p><figure><img src=/products/lcdwing/display-1_23.svg></figure><p>There is also a special method to toggle the colon. Call <code>display.toggle_colon()</code> and it will set the colon to the opposite of its current state: if it was on, it turns off, and if it was off it turns on. Calling this method twice a second is a good way to display a clock ticking.</p><h4 id=sign-indicator-and-decimal-points>Sign Indicator and Decimal Points</h4><p>If the first character in your string is a minus sign (<code>-</code>), the LCD FeatherWing library will set the sign indicator to the left of the digits instead of putting the sign in the first digit. This means that you can display any number from -99999 to 99999.</p><figure><img src=/products/lcdwing/display-neg99999.svg></figure><figure><img src=/products/lcdwing/display-99999.svg></figure><p>It also means that if you are using the colon, it will be expected in the fourth position instead of the third, as in this countdown clock: <code>display.print("-10:00.0")</code>.</p><figure><img src=/products/lcdwing/display-countdown.svg></figure><p>There are four decimal points, one between each digit. The LCD FeatherWing library will automatically set the appropriate decimal point if it is included in your string, unless it occurs before the first digit or after the last one. This is because there is no decimal point to the left of the first digit or the right of the last one. So, for example, <code>display.print(".1234")</code> will display incorrectly, but <code>display.print("0.1234")</code> will work. Similarly, <code>display.print("Thurs.")</code> will omit the period at the end, but <code>display.print("Thur.")</code> will display it.</p><figure><img src=/products/lcdwing/display-01234.svg></figure><figure><img src=/products/lcdwing/display-thur.svg></figure><h4 id=indicator-icons>Indicator Icons</h4><p>There are seven indicators on the LCD, including five icons as well as the AM and PM indicators on the right.</p><figure><img src=/products/lcdwing/display-indicators.svg></figure><p>You can control these indicators using the <code>set_indicator</code> and <code>clear_indicator</code> methods. The indicators are defined in the <code>Indicator</code> class in the <code>lcdwing_lite</code> module. Their definitions, clockwise from top left:</p><ul><li><code>Indicator.BELL</code></li><li><code>Indicator.WIFI</code></li><li><code>Indicator.AM</code></li><li><code>Indicator.PM</code></li><li><code>Indicator.BATTERY</code></li><li><code>Indicator.DATA</code> (the paired arrows)</li><li><code>Indicator.MOON</code></li></ul><p>There is also a special value, <code>Indicator.ALL</code>, that is useful to clear all indicators at once: <code>display.clear_indicator(Indicator.ALL)</code>.</p><h4 id=putting-it-all-together-simple-clock-app>Putting It All Together: Simple Clock App</h4><figure><img src=/products/lcdwing/display-clock.svg></figure><p>This Python script is available in the examples folder of the LCD FeatherWing CircuitPython library. It&rsquo;s a simple clock that uses CircuitPython&rsquo;s built-in RTC module to display the current time.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> board
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> rtc
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> oso_lcd.lcdwing_lite <span style=color:#f92672>import</span> LCDWingLite, Indicator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>display <span style=color:#f92672>=</span> LCDWingLite(board<span style=color:#f92672>.</span>I2C())
</span></span><span style=display:flex><span>minute <span style=color:#f92672>=</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>clock <span style=color:#f92672>=</span> rtc<span style=color:#f92672>.</span>RTC()
</span></span><span style=display:flex><span>clock<span style=color:#f92672>.</span>datetime <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>struct_time((<span style=color:#ae81ff>2022</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>59</span>, <span style=color:#ae81ff>55</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> minute <span style=color:#f92672>!=</span> clock<span style=color:#f92672>.</span>datetime<span style=color:#f92672>.</span>tm_min:
</span></span><span style=display:flex><span>        dt <span style=color:#f92672>=</span> clock<span style=color:#f92672>.</span>datetime
</span></span><span style=display:flex><span>        hour <span style=color:#f92672>=</span> dt<span style=color:#f92672>.</span>tm_hour <span style=color:#f92672>%</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>        minute <span style=color:#f92672>=</span> dt<span style=color:#f92672>.</span>tm_min
</span></span><span style=display:flex><span>        display<span style=color:#f92672>.</span>clear_indicator(Indicator<span style=color:#f92672>.</span>ALL)
</span></span><span style=display:flex><span>        display<span style=color:#f92672>.</span>print(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{:2d}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>{:02d}</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>format(hour <span style=color:#66d9ef>if</span> hour <span style=color:#66d9ef>else</span> <span style=color:#ae81ff>12</span>, minute))
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> dt<span style=color:#f92672>.</span>tm_hour <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>12</span>:
</span></span><span style=display:flex><span>            display<span style=color:#f92672>.</span>set_indicator(Indicator<span style=color:#f92672>.</span>AM)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            display<span style=color:#f92672>.</span>set_indicator(Indicator<span style=color:#f92672>.</span>PM)
</span></span><span style=display:flex><span>    display<span style=color:#f92672>.</span>toggle_colon()
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>0.5</span>)</span></span></code></pre></div><h2 id=resources>Resources</h2><ul><li><a href=https://github.com/joeycastillo/OSO_CircuitPython_LCD>LCD FeatherWing CircuitPython library</a></li><li><a href=https://github.com/joeycastillo/LCD-FeatherWing>Design files for LCD wing and custom LCD</a></li><li><a href=bu9796axxx-e.pdf>BU9796 data sheet</a></li></ul><hr><h1 id=advanced-configuration>Advanced Configuration</h1><p>There are two solder jumpers on the back of the circuit board that allow for advanced configuration. In general, you don&rsquo;t need to do anything to them, but they can be useful in some specific cases.</p><h3 id=jp1-software-contrast-control>JP1: Software Contrast Control</h3><p>JP1 allows you to control the LCD driving voltage using the DAC pin on an ESP32 Feather or a Feather M4. This can be useful to lower the contrast of the display if you intend to view it from an extreme angle.</p><p>To enable this functionality, use an Exacto knife to cut the bridge connecting JP1 to the pad on the right (GND). Then use a blob of solder to bridge the center pad to the left pad (A0).</p><p>Now, the voltage on A0 will define the LCD voltage according to the following formula: <code>VLCD = 3.3 - A0</code>. Setting A0 to 0 V will drive the LCD at 3.3 volts; setting A0 to 0.3 V will drive it at 3.0 volts, etc.</p><h3 id=sda-and-scl-jumpers-alternate-ic-bus>SDA and SCL jumpers: alternate I²C bus</h3><p>The BU9796 has no address pins, so you can only drive one display on an I²C bus. However, some Feather boards can support two or even more I²C buses! By soldering wires to these pads and rerouting some signals, you can drive multiple LCD FeahterWings from one Feather.</p><p>Please note: <strong>THIS IS AN ADVANCED HACK</strong> and it&rsquo;s easy to inadvertently cut a trace, pull a pad or knock off a surface mount resistor while doing this. Please only attempt this if you feel comfortable working in a very small area.</p><p>To do this hack, fully cut the bridge connecting the top and bottom of the SDA and SCL jumpers. Then solder a wire to the BOTTOM half of the jumper. Connect the other side of the wire to an alternate SDA or SCL pin. Some guidance on which pins work:</p><h4 id=esp32s2s3-and-nrf52840-feathers>ESP32/S2/S3 and NRF52840 Feathers</h4><p>These devices have two I²C peripherals. In addition to the main I²C bus on SDA and SCL, any two pins can function as a second I²C bus.</p><h4 id=feather-m0-and-m0-express>Feather M0 and M0 Express</h4><p>These devices can support up to four I²C buses. In addition to the main I²C bus on SDA and SCL, you can use the following pins to create three additional I²C buses:</p><ul><li>A1 (SDA) and A2 (SCL) *</li><li>A3 (SDA) and A4 (SCL)</li><li>11 (SDA) and 13 (SCL)</li></ul><p>* Note that in this configuration, you will be unable to use the SPI pins as an SPI bus, although they&rsquo;ll still work fine as GPIO.</p><h4 id=feather-m4-express>Feather M4 Express</h4><p>This device can support up to <em>SIX</em> I²C buses! In addition to the main I²C bus on SDA and SCL, you can use the following pins to create five additional I²C buses:</p><ul><li>A2 (SDA) and A3 (SCL)</li><li>A4 (SDA) and A1 (SCL)</li><li>12 (SDA) and 13 (SCL)</li><li>TX (SDA) and RX (SCL)</li><li>5 (SDA) and SCK (SCL)</li></ul></div></main></body></html>